import{c as xe,r as c,j as e,d as v,X as Q,p as ge,b as fe,t as C}from"./index-DykhQkCz.js";import{M as je,a as be,P as ve,B as R}from"./MobileLayout-D0P8EqVx.js";import{B as ye}from"./BottomNav-B9ClJoKd.js";import{P as Ne}from"./PetSelector-DeSwfx4H.js";import{A as we,b as Ce,c as ke,d as Se,e as De,f as Le,g as Me,h as Pe}from"./alert-dialog-Dm62moyN.js";import{D as Fe,a as Te,b as Oe}from"./dialog-C6CGz7Ks.js";import{P as Re}from"./pencil-zDUrplB_.js";import{T as Ae}from"./trash-2-AfDv_LSy.js";import{R as J,P as Z,T as ee,U as se}from"./utensils-crossed-BFnIAvKJ.js";import{S as K,R as Ee}from"./RatingSlider-n_BkI6Xs.js";import{M as ze,T as Ue,R as _,A as $,X as W,Y as V,a as X}from"./AreaChart-xA_alHb2.js";import{f as x}from"./format-DsNdWjgr.js";import{u as Be,a as Ke,b as Ge,c as He,d as A}from"./useLogs-xxhwBdP6.js";import{O as te,C as ae,a as qe,T as ne,D as le,R as Ie,P as _e}from"./index-Dsh9-iej.js";import{I as g}from"./input-BtP13zn0.js";import"./PetAvatar-Bi96YrWD.js";import"./plus-CKAhW2G1.js";import"./differenceInCalendarDays-qwJqrl5B.js";import"./rewards-DUz26ILh.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Y={not_applicable:"Not applicable",undesirable_behavior:"Undesirable behavior",lip_paws:"Lip paws",vomit:"Vomit",other:"Other noted"};function We({log:t,onEdit:r,onDelete:o,isDeleting:u}){const[s,n]=c.useState(!1),[f,y]=c.useState(!1),[a,N]=c.useState(!1),w=()=>{switch(t.type){case"food":return se;case"poop":return ee;case"supplement":return Z;case"measurement":return J}},i=()=>{switch(t.type){case"food":return"bg-secondary/50";case"poop":return"bg-accent-pink/30";case"supplement":return"bg-accent/30";case"measurement":return"bg-card-muted"}},L=()=>t.type==="poop"||t.type==="food"||t.type==="supplement"?t.photoUrl:null,z=()=>{switch(t.type){case"food":const p=t;return e.jsxs("span",{children:[p.foodName," - ",p.amountGrams,"g"]});case"poop":const d=t;return e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"capitalize",children:[d.color.replace("_"," ")," • ",d.consistency]}),d.userRating&&e.jsxs("span",{className:"flex items-center gap-0.5 text-xs bg-primary/10 px-1.5 py-0.5 rounded-full",children:[e.jsx(K,{className:"w-3 h-3 fill-primary text-primary"}),d.userRating]}),d.undesirableBehaviors&&d.undesirableBehaviors.length>0&&!d.undesirableBehaviors.includes("not_applicable")&&e.jsx("span",{className:"text-xs font-medium text-destructive",children:d.undesirableBehaviors.map(O=>Y[O]||O).join(", ")})]});case"supplement":const j=t;return e.jsxs("span",{children:[j.supplementName," - ",j.dosage]});case"measurement":const h=t,S=[];return h.weightKg&&S.push(`${h.weightKg}kg`),h.neckCm&&S.push(`Neck: ${h.neckCm}cm`),e.jsx("span",{children:S.join(" • ")||"Measurements"})}},U=()=>{switch(t.type){case"food":const p=t;return e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Food:"})," ",p.foodName]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"})," ",p.amountGrams,"g"]}),p.mealType&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Meal:"})," ",p.mealType]})]}),p.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"}),e.jsx("p",{className:"mt-1",children:p.notes})]})]});case"poop":const d=t;return e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Color:"})," ",e.jsx("span",{className:"capitalize",children:d.color.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Consistency:"})," ",e.jsx("span",{className:"capitalize",children:d.consistency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"})," ",e.jsx("span",{className:"capitalize",children:d.amount})]}),d.userRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rating:"}),e.jsx(K,{className:"w-3 h-3 fill-primary text-primary"}),d.userRating,"/10"]})]}),d.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{children:d.location})]}),d.undesirableBehaviors&&d.undesirableBehaviors.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Behavior flags:"}),e.jsx("p",{className:"mt-1",children:d.undesirableBehaviors.map(S=>Y[S]||S).join(", ")}),d.undesirableBehaviorNotes&&e.jsx("p",{className:"mt-1 text-sm",children:d.undesirableBehaviorNotes})]}),d.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"}),e.jsx("p",{className:"mt-1",children:d.notes})]})]});case"supplement":const j=t;return e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Supplement:"})," ",j.supplementName]}),j.dosage&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Dosage:"})," ",j.dosage]}),j.frequency&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Frequency:"})," ",j.frequency]})]}),j.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"}),e.jsx("p",{className:"mt-1",children:j.notes})]})]});case"measurement":const h=t;return e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.weightKg&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"})," ",h.weightKg,"kg"]}),h.neckCm&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Neck:"})," ",h.neckCm,"cm"]}),h.chestCm&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Chest:"})," ",h.chestCm,"cm"]}),h.bodyLengthCm&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Body Length:"})," ",h.bodyLengthCm,"cm"]})]}),h.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"}),e.jsx("p",{className:"mt-1",children:h.notes})]})]})}},D=w(),k=L(),B=p=>{p.target.closest("button")||y(!f)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:v("rounded-xl group cursor-pointer transition-all duration-200",i(),f&&"ring-2 ring-primary/20"),onClick:B,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3",children:[k?e.jsx("img",{src:k,alt:"Log photo",className:"w-10 h-10 rounded-xl object-cover shrink-0"}):e.jsx("div",{className:"w-10 h-10 rounded-xl bg-background flex items-center justify-center shrink-0",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium capitalize",children:t.type}),e.jsx("div",{className:"text-sm text-muted-foreground",children:z()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:x(new Date(t.timestamp),"h:mm a")}),e.jsx($e,{className:v("w-4 h-4 text-muted-foreground transition-transform duration-200",f&&"rotate-180")})]})]}),f&&e.jsxs("div",{className:"px-3 pb-3 space-y-3 animate-fade-in",children:[k&&e.jsxs("div",{className:"relative rounded-xl overflow-hidden cursor-zoom-in",onClick:p=>{p.stopPropagation(),N(!0)},children:[e.jsx("img",{src:k,alt:"Log photo",className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center",children:e.jsx("span",{className:"text-white/0 hover:text-white/80 text-sm font-medium",children:"Tap to view full size"})})]}),e.jsx("div",{className:"bg-background/50 rounded-xl p-3",children:U()}),(r||o)&&e.jsxs("div",{className:"flex gap-2 pt-1",children:[r&&e.jsxs("button",{onClick:p=>{p.stopPropagation(),r()},className:"flex-1 flex items-center justify-center gap-2 p-2 rounded-lg bg-background hover:bg-background/80 transition-colors text-sm font-medium",children:[e.jsx(Re,{className:"w-4 h-4"}),"Edit"]}),o&&e.jsxs("button",{onClick:p=>{p.stopPropagation(),n(!0)},className:"flex-1 flex items-center justify-center gap-2 p-2 rounded-lg bg-destructive/10 hover:bg-destructive/20 text-destructive transition-colors text-sm font-medium",disabled:u,children:[e.jsx(Ae,{className:"w-4 h-4"}),"Delete"]})]})]})]}),e.jsx(Fe,{open:a,onOpenChange:N,children:e.jsxs(Te,{className:"max-w-[95vw] max-h-[95vh] p-0 bg-black/90 border-none",children:[e.jsx(Oe,{className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:e.jsx(Q,{className:"w-5 h-5"})}),k&&e.jsx("img",{src:k,alt:"Log photo full size",className:"w-full h-full object-contain max-h-[90vh]"})]})}),e.jsx(we,{open:s,onOpenChange:n,children:e.jsxs(Ce,{children:[e.jsxs(ke,{children:[e.jsx(Se,{children:"Delete this log?"}),e.jsxs(De,{children:["This action cannot be undone. This will permanently delete this ",t.type," log."]})]}),e.jsxs(Le,{children:[e.jsx(Me,{children:"Cancel"}),e.jsx(Pe,{onClick:()=>{o==null||o(),n(!1)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}const E=Ie,Ve=_e,ie=c.forwardRef(({className:t,...r},o)=>e.jsx(te,{className:v("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:o}));ie.displayName=te.displayName;const Xe=ge("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),P=c.forwardRef(({side:t="right",className:r,children:o,...u},s)=>e.jsxs(Ve,{children:[e.jsx(ie,{}),e.jsxs(ae,{ref:s,className:v(Xe({side:t}),r),...u,children:[o,e.jsxs(qe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));P.displayName=ae.displayName;const F=({className:t,...r})=>e.jsx("div",{className:v("flex flex-col space-y-2 text-center sm:text-left",t),...r});F.displayName="SheetHeader";const T=c.forwardRef(({className:t,...r},o)=>e.jsx(ne,{ref:o,className:v("text-lg font-semibold text-foreground",t),...r}));T.displayName=ne.displayName;const Ye=c.forwardRef(({className:t,...r},o)=>e.jsx(le,{ref:o,className:v("text-sm text-muted-foreground",t),...r}));Ye.displayName=le.displayName;function vs(){const[t,r]=c.useState("timeline"),[o,u]=c.useState("all"),[s,n]=c.useState(null),{pets:f,selectedPet:y,selectedPetId:a,setSelectedPetId:N}=fe(),{logs:w,deleteLog:i,updateLog:L,isDeleting:z,isUpdating:U}=Be(a),{logs:D,deleteLog:k,updateLog:B,isDeleting:p,isUpdating:d}=Ke(a),{logs:j,deleteLog:h,updateLog:S,isDeleting:O,isUpdating:oe}=Ge(a),{logs:M,deleteLog:re,updateLog:de,isDeleting:ce,isUpdating:me}=He(a),G=c.useMemo(()=>{let l=[];return(o==="all"||o==="food")&&(l=[...l,...w.map(m=>({...m,type:"food"}))]),(o==="all"||o==="poop")&&(l=[...l,...D.map(m=>({...m,type:"poop"}))]),(o==="all"||o==="supplement")&&(l=[...l,...j.map(m=>({...m,type:"supplement"}))]),(o==="all"||o==="measurement")&&(l=[...l,...M.map(m=>({...m,type:"measurement"}))]),l.sort((m,b)=>new Date(b.timestamp).getTime()-new Date(m.timestamp).getTime())},[w,D,j,M,o]),H=c.useMemo(()=>{const l={};return G.forEach(m=>{const b=x(new Date(m.timestamp),"yyyy-MM-dd");l[b]||(l[b]=[]),l[b].push(m)}),l},[G]),q=c.useMemo(()=>M.filter(l=>l.weightKg).slice(0,20).reverse().map(l=>({date:x(new Date(l.timestamp),"MMM d"),weight:l.weightKg})),[M]),I=c.useMemo(()=>D.filter(l=>l.userRating).slice(0,20).reverse().map(l=>({date:x(new Date(l.timestamp),"MMM d"),rating:l.userRating})),[D]),pe=async(l,m)=>{try{switch(l){case"food":await i(m);break;case"poop":await k(m);break;case"supplement":await h(m);break;case"measurement":await re(m);break}C({title:"Log deleted"})}catch(b){C({title:"Failed to delete",description:b.message,variant:"destructive"})}},ue=(l,m)=>{n({type:l,log:m})},he=[{value:"all",label:"All",icon:null},{value:"food",label:"Food",icon:se},{value:"poop",label:"Poop",icon:ee},{value:"supplement",label:"Supps",icon:Z},{value:"measurement",label:"Measure",icon:J}];return e.jsxs(je,{children:[e.jsx(be,{title:"History"}),e.jsxs(ve,{children:[e.jsx("div",{className:"mb-6",children:e.jsx(Ne,{pets:f,selectedPetId:a,onSelectPet:N,showAddButton:!1})}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>r("timeline"),className:v("flex-1 py-3 rounded-xl font-medium transition-all",t==="timeline"?"bg-primary text-primary-foreground":"bg-card-muted"),children:"Timeline"}),e.jsx("button",{onClick:()=>r("charts"),className:v("flex-1 py-3 rounded-xl font-medium transition-all",t==="charts"?"bg-primary text-primary-foreground":"bg-card-muted"),children:"Charts"})]}),t==="timeline"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 -mx-4 px-4",children:he.map(l=>e.jsxs("button",{onClick:()=>u(l.value),className:v("flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all whitespace-nowrap",o===l.value?"bg-primary text-primary-foreground":"bg-card-muted hover:bg-card-subtle"),children:[l.icon&&e.jsx(l.icon,{className:"w-3.5 h-3.5"}),l.label]},l.value))}),e.jsx("div",{className:"space-y-6",children:Object.keys(H).length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e.jsxs("p",{children:["No logs yet for ",(y==null?void 0:y.name)||"this pet",". Start tracking!"]})}):Object.entries(H).map(([l,m])=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-medium mb-3",children:x(new Date(l),"EEEE, MMMM d")}),e.jsx("div",{className:"space-y-2",children:m.map(b=>e.jsx(We,{log:b,onEdit:()=>ue(b.type,b),onDelete:()=>pe(b.type,b.id),isDeleting:z||p||O||ce},b.id))})]},l))})]}),t==="charts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-nude",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display font-medium",children:"Weight Trend"}),e.jsx(Ue,{className:"w-4 h-4 text-muted-foreground"})]}),q.length>0?e.jsx("div",{className:"h-40",children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs($,{data:q,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"weightGradient2",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(5, 23%, 90%)",stopOpacity:.4}),e.jsx("stop",{offset:"100%",stopColor:"hsl(5, 23%, 90%)",stopOpacity:0})]})}),e.jsx(W,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(22, 24%, 40%)"}}),e.jsx(V,{domain:["dataMin - 0.2","dataMax + 0.2"],axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(22, 24%, 40%)"},width:30}),e.jsx(X,{type:"monotone",dataKey:"weight",stroke:"hsl(22, 24%, 21%)",strokeWidth:2,fill:"url(#weightGradient2)"})]})})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No weight data yet"})]}),e.jsxs("div",{className:"card-nude",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display font-medium",children:"Poop Quality Trend"}),e.jsx(K,{className:"w-4 h-4 text-muted-foreground"})]}),I.length>0?e.jsx("div",{className:"h-40",children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs($,{data:I,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ratingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(142, 76%, 36%)",stopOpacity:.4}),e.jsx("stop",{offset:"100%",stopColor:"hsl(142, 76%, 36%)",stopOpacity:0})]})}),e.jsx(W,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(22, 24%, 40%)"}}),e.jsx(V,{domain:[1,10],axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(22, 24%, 40%)"},width:20}),e.jsx(X,{type:"monotone",dataKey:"rating",stroke:"hsl(142, 76%, 36%)",strokeWidth:2,fill:"url(#ratingGradient)"})]})})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No poop ratings yet"})]}),e.jsxs("div",{className:"card-nude",children:[e.jsx("h3",{className:"font-display font-medium mb-4",children:"Activity Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-display font-semibold",children:w.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Food Logs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-display font-semibold",children:D.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Poop Logs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-display font-semibold",children:j.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supplements"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-display font-semibold",children:M.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Measurements"})]})]})]})]})]}),e.jsx(Qe,{log:(s==null?void 0:s.type)==="food"?s.log:null,onClose:()=>n(null),onSave:L,isUpdating:U}),e.jsx(Je,{log:(s==null?void 0:s.type)==="poop"?s.log:null,onClose:()=>n(null),onSave:B,isUpdating:d}),e.jsx(Ze,{log:(s==null?void 0:s.type)==="supplement"?s.log:null,onClose:()=>n(null),onSave:S,isUpdating:oe}),e.jsx(es,{log:(s==null?void 0:s.type)==="measurement"?s.log:null,onClose:()=>n(null),onSave:de,isUpdating:me}),e.jsx(ye,{})]})}function Qe({log:t,onClose:r,onSave:o,isUpdating:u}){const[s,n]=c.useState({foodName:"",amountGrams:"",notes:"",date:"",time:""}),f=!!t;c.useEffect(()=>{var a;if(t){const N=new Date(t.timestamp);n({foodName:t.foodName,amountGrams:((a=t.amountGrams)==null?void 0:a.toString())||"",notes:t.notes||"",date:x(N,"yyyy-MM-dd"),time:x(N,"HH:mm")})}},[t]);const y=async()=>{if(t)try{await o({...t,foodName:s.foodName,amountGrams:s.amountGrams?parseInt(s.amountGrams):0,notes:s.notes||void 0,timestamp:new Date(`${s.date}T${s.time}`).toISOString()}),C({title:"Log updated"}),r()}catch(a){C({title:"Failed to update",description:a.message,variant:"destructive"})}};return t?e.jsx(E,{open:f,onOpenChange:a=>!a&&r(),children:e.jsxs(P,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[e.jsx(F,{children:e.jsx(T,{children:"Edit Food Log"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[t.photoUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Photo"}),e.jsx("img",{src:t.photoUrl,alt:"Food photo",className:"w-full h-40 object-cover rounded-xl"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsx(g,{type:"date",placeholder:"2024-05-01",value:s.date,onChange:a=>n({...s,date:a.target.value}),max:x(A(new Date,1),"yyyy-MM-dd")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time"}),e.jsx(g,{type:"time",placeholder:"08:30",value:s.time,onChange:a=>n({...s,time:a.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Food Name"}),e.jsx(g,{placeholder:"e.g., Turkey kibble",value:s.foodName,onChange:a=>n({...s,foodName:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Amount (grams)"}),e.jsx(g,{type:"number",placeholder:"120",value:s.amountGrams,onChange:a=>n({...s,amountGrams:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes"}),e.jsx("textarea",{placeholder:"e.g., Ate slower than usual",value:s.notes,onChange:a=>n({...s,notes:a.target.value}),className:"w-full h-20 rounded-xl bg-card-subtle px-4 py-3 text-foreground resize-none"})]}),e.jsx(R,{onClick:y,className:"w-full",disabled:u,children:u?"Saving...":"Save Changes"})]})]})}):null}function Je({log:t,onClose:r,onSave:o,isUpdating:u}){const[s,n]=c.useState({consistency:"",color:"",amount:"",userRating:void 0,notes:"",date:"",time:""}),f=!!t;c.useEffect(()=>{if(t){const i=new Date(t.timestamp);n({consistency:t.consistency,color:t.color,amount:t.amount,userRating:t.userRating,notes:t.notes||"",date:x(i,"yyyy-MM-dd"),time:x(i,"HH:mm")})}},[t]);const y=async()=>{if(t)try{await o({...t,consistency:s.consistency,color:s.color,amount:s.amount,userRating:s.userRating,notes:s.notes||void 0,timestamp:new Date(`${s.date}T${s.time}`).toISOString()}),C({title:"Log updated"}),r()}catch(i){C({title:"Failed to update",description:i.message,variant:"destructive"})}};if(!t)return null;const a=["solid","soft","runny","hard"],N=["brown","dark_brown","light_brown","black","red","green"],w=["small","medium","large"];return e.jsx(E,{open:f,onOpenChange:i=>!i&&r(),children:e.jsxs(P,{side:"bottom",className:"h-[85vh] overflow-y-auto",children:[e.jsx(F,{children:e.jsx(T,{children:"Edit Poop Log"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[t.photoUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Photo"}),e.jsx("img",{src:t.photoUrl,alt:"Poop photo",className:"w-full h-40 object-cover rounded-xl"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsx(g,{type:"date",placeholder:"2024-05-01",value:s.date,onChange:i=>n({...s,date:i.target.value}),max:x(A(new Date,1),"yyyy-MM-dd")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time"}),e.jsx(g,{type:"time",placeholder:"08:30",value:s.time,onChange:i=>n({...s,time:i.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Consistency"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(i=>e.jsx("button",{onClick:()=>n({...s,consistency:i}),className:v("px-3 py-2 rounded-lg text-sm capitalize",s.consistency===i?"bg-primary text-primary-foreground":"bg-card-muted"),children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(i=>e.jsx("button",{onClick:()=>n({...s,color:i}),className:v("px-3 py-2 rounded-lg text-sm capitalize",s.color===i?"bg-primary text-primary-foreground":"bg-card-muted"),children:i.replace("_"," ")},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Amount"}),e.jsx("div",{className:"flex gap-2",children:w.map(i=>e.jsx("button",{onClick:()=>n({...s,amount:i}),className:v("flex-1 px-3 py-2 rounded-lg text-sm capitalize",s.amount===i?"bg-primary text-primary-foreground":"bg-card-muted"),children:i},i))})]}),e.jsx(Ee,{value:s.userRating,onChange:i=>n({...s,userRating:i})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes"}),e.jsx("textarea",{placeholder:"e.g., Slight mucus today",value:s.notes,onChange:i=>n({...s,notes:i.target.value}),className:"w-full h-20 rounded-xl bg-card-subtle px-4 py-3 text-foreground resize-none"})]}),e.jsx(R,{onClick:y,className:"w-full",disabled:u,children:u?"Saving...":"Save Changes"})]})]})})}function Ze({log:t,onClose:r,onSave:o,isUpdating:u}){const[s,n]=c.useState({supplementName:"",dosage:"",frequency:"",notes:"",date:"",time:""}),f=!!t;c.useEffect(()=>{if(t){const a=new Date(t.timestamp);n({supplementName:t.supplementName,dosage:t.dosage||"",frequency:t.frequency||"daily",notes:t.notes||"",date:x(a,"yyyy-MM-dd"),time:x(a,"HH:mm")})}},[t]);const y=async()=>{if(t)try{await o({...t,supplementName:s.supplementName,dosage:s.dosage||"",frequency:s.frequency,notes:s.notes||void 0,timestamp:new Date(`${s.date}T${s.time}`).toISOString()}),C({title:"Log updated"}),r()}catch(a){C({title:"Failed to update",description:a.message,variant:"destructive"})}};return t?e.jsx(E,{open:f,onOpenChange:a=>!a&&r(),children:e.jsxs(P,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[e.jsx(F,{children:e.jsx(T,{children:"Edit Supplement Log"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[t.photoUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Photo"}),e.jsx("img",{src:t.photoUrl,alt:"Supplement photo",className:"w-full h-40 object-cover rounded-xl"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsx(g,{type:"date",placeholder:"2024-05-01",value:s.date,onChange:a=>n({...s,date:a.target.value}),max:x(A(new Date,1),"yyyy-MM-dd")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time"}),e.jsx(g,{type:"time",placeholder:"08:30",value:s.time,onChange:a=>n({...s,time:a.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Supplement Name"}),e.jsx(g,{placeholder:"e.g., Omega 3",value:s.supplementName,onChange:a=>n({...s,supplementName:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Dosage"}),e.jsx(g,{placeholder:"e.g., 1 capsule",value:s.dosage,onChange:a=>n({...s,dosage:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Frequency"}),e.jsx("div",{className:"flex gap-2",children:["daily","weekly","as_needed"].map(a=>e.jsx("button",{onClick:()=>n({...s,frequency:a}),className:v("flex-1 px-3 py-2 rounded-lg text-sm capitalize",s.frequency===a?"bg-primary text-primary-foreground":"bg-card-muted"),children:a.replace("_"," ")},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes"}),e.jsx("textarea",{placeholder:"e.g., Give with dinner only",value:s.notes,onChange:a=>n({...s,notes:a.target.value}),className:"w-full h-20 rounded-xl bg-card-subtle px-4 py-3 text-foreground resize-none"})]}),e.jsx(R,{onClick:y,className:"w-full",disabled:u,children:u?"Saving...":"Save Changes"})]})]})}):null}function es({log:t,onClose:r,onSave:o,isUpdating:u}){const[s,n]=c.useState({weightKg:"",neckCm:"",chestCm:"",bodyLengthCm:"",notes:"",date:"",time:""}),f=!!t;c.useEffect(()=>{var a,N,w,i;if(t){const L=new Date(t.timestamp);n({weightKg:((a=t.weightKg)==null?void 0:a.toString())||"",neckCm:((N=t.neckCm)==null?void 0:N.toString())||"",chestCm:((w=t.chestCm)==null?void 0:w.toString())||"",bodyLengthCm:((i=t.bodyLengthCm)==null?void 0:i.toString())||"",notes:t.notes||"",date:x(L,"yyyy-MM-dd"),time:x(L,"HH:mm")})}},[t]);const y=async()=>{if(t)try{await o({...t,weightKg:s.weightKg?parseFloat(s.weightKg):void 0,neckCm:s.neckCm?parseFloat(s.neckCm):void 0,chestCm:s.chestCm?parseFloat(s.chestCm):void 0,bodyLengthCm:s.bodyLengthCm?parseFloat(s.bodyLengthCm):void 0,notes:s.notes||void 0,timestamp:new Date(`${s.date}T${s.time}`).toISOString()}),C({title:"Log updated"}),r()}catch(a){C({title:"Failed to update",description:a.message,variant:"destructive"})}};return t?e.jsx(E,{open:f,onOpenChange:a=>!a&&r(),children:e.jsxs(P,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[e.jsx(F,{children:e.jsx(T,{children:"Edit Measurement Log"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsx(g,{type:"date",placeholder:"2024-05-01",value:s.date,onChange:a=>n({...s,date:a.target.value}),max:x(A(new Date,1),"yyyy-MM-dd")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time"}),e.jsx(g,{type:"time",placeholder:"08:30",value:s.time,onChange:a=>n({...s,time:a.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Weight (kg)"}),e.jsx(g,{type:"number",step:"0.1",placeholder:"6.8",value:s.weightKg,onChange:a=>n({...s,weightKg:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Neck (cm)"}),e.jsx(g,{type:"number",step:"0.1",placeholder:"28",value:s.neckCm,onChange:a=>n({...s,neckCm:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Chest (cm)"}),e.jsx(g,{type:"number",step:"0.1",placeholder:"45",value:s.chestCm,onChange:a=>n({...s,chestCm:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Body Length (cm)"}),e.jsx(g,{type:"number",step:"0.1",placeholder:"52",value:s.bodyLengthCm,onChange:a=>n({...s,bodyLengthCm:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes"}),e.jsx("textarea",{placeholder:"e.g., Harness felt loose after weigh-in",value:s.notes,onChange:a=>n({...s,notes:a.target.value}),className:"w-full h-20 rounded-xl bg-card-subtle px-4 py-3 text-foreground resize-none"})]}),e.jsx(R,{onClick:y,className:"w-full",disabled:u,children:u?"Saving...":"Save Changes"})]})]})}):null}export{vs as default};
