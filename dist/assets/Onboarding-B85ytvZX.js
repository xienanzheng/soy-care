import{u as w,b as B,r as m,j as e,d as o,t as b}from"./index-DykhQkCz.js";import{M as A,a as k,P as I,B as v}from"./MobileLayout-D0P8EqVx.js";import{I as i}from"./input-BtP13zn0.js";import{P as D}from"./PhotoUpload-DYIKrCeN.js";import{u as U}from"./usePhotoUpload-Bns2eVj-.js";import{A as H}from"./arrow-left-CdLBjOwR.js";const R=["Dog","Cat","Rabbit","Hamster","Guinea Pig","Others"],T={Dog:["Golden Retriever","Beagle","Terrier","Corgi","Border Collie","Pomeranian","Spitz","Great Dane","Poodle","Maltese","Others"],Cat:["Persian","Siamese","Maine Coon","Ragdoll","British Shorthair","Others"],Rabbit:["Holland Lop","Mini Rex","Netherland Dwarf","Others"],Hamster:["Syrian","Dwarf","Roborovski","Others"],"Guinea Pig":["American","Peruvian","Abyssinian","Others"],Others:["Others"]},E=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],L=["Calm","Playful","Sensitive","High energy","Chill","Curious"];function W(){var f;const c=w(),{createPet:N,setSelectedPetId:j,isCreatingPet:h}=B(),{uploadPhoto:y,isUploading:n}=U(),[r,u]=m.useState(1),[x,C]=m.useState(null),[a,t]=m.useState({name:"",species:"",breed:"",customBreed:"",gender:"",dateOfBirth:"",photoUrl:"",handle:"",ownerName:"",medicalHistory:"",allergies:"",favoriteActivities:"",personality:""}),d=4,O=async()=>{if(r<d)u(r+1);else{const s=a.breed==="Others"?a.customBreed:a.breed;try{let l=a.photoUrl;if(x){const g=await y(x,"pet-photos","pets");g&&(l=g)}const S=await N({name:a.name,handle:a.handle||`@${a.name.toLowerCase().replace(/\s+/g,"")}`,species:a.species,breed:s,gender:a.gender||"other",dateOfBirth:a.dateOfBirth||void 0,photoUrl:l||void 0,ownerName:a.ownerName||void 0,medicalHistory:a.medicalHistory||void 0,allergies:a.allergies||void 0,favoriteActivities:a.favoriteActivities||void 0,personality:a.personality||void 0});j(S.id),b({title:"Pet added!",description:`Welcome ${a.name} to Soycraft!`}),c("/dashboard")}catch(l){b({title:"Failed to add pet",description:l.message,variant:"destructive"})}}},p=()=>{r>1?u(r-1):c("/dashboard")},P=()=>{switch(r){case 1:return a.name.trim().length>0;case 2:const s=a.breed==="Others"?a.customBreed.trim().length>0:a.breed.length>0;return a.species.length>0&&s;case 3:return!0;case 4:return!0;default:return!1}};return e.jsxs(A,{children:[e.jsx(k,{leftAction:e.jsx("button",{onClick:p,className:"p-2 -ml-2",children:e.jsx(H,{className:"w-5 h-5"})})}),e.jsxs(I,{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center gap-2 mb-8",children:Array.from({length:d},(s,l)=>e.jsx("div",{className:o("h-1 flex-1 rounded-full transition-colors",l<r?"bg-primary":"bg-card-muted")},l))}),r===1&&e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-semibold mb-2",children:"Let's meet your pet"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a hero photo so AI can recognise them and estimate their breed mix."})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(D,{value:a.photoUrl,onChange:s=>t({...a,photoUrl:s||""}),onFileSelect:s=>C(s),isUploading:n,size:"lg",shape:"square"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"The photo powers the AI dashboard (breed percentages, stool analysis and more)."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Name"}),e.jsx(i,{placeholder:"e.g., Luna",value:a.name,onChange:s=>t({...a,name:s.target.value}),className:"mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You can add more pets anytime from your profile."})]})]}),r===2&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h1",{className:"text-2xl font-display font-semibold mb-2",children:"What are your pet's attributes"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Select species and breed"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Species"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(s=>e.jsx("button",{onClick:()=>t({...a,species:s,breed:""}),className:o("px-4 py-2 rounded-full text-sm font-medium transition-all",a.species===s?"bg-primary text-primary-foreground":"bg-card-muted hover:bg-card-subtle"),children:s},s))})]}),a.species&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Breed"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(f=T[a.species])==null?void 0:f.map(s=>e.jsx("button",{onClick:()=>t({...a,breed:s,customBreed:s==="Others"?a.customBreed:""}),className:o("px-4 py-2 rounded-full text-sm font-medium transition-all",a.breed===s?"bg-primary text-primary-foreground":"bg-card-muted hover:bg-card-subtle"),children:s},s))}),a.breed==="Others"&&e.jsx("div",{className:"mt-4 animate-fade-in",children:e.jsx(i,{placeholder:"e.g., Sheepadoodle mix",value:a.customBreed,onChange:s=>t({...a,customBreed:s.target.value})})})]})]}),r===3&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h1",{className:"text-2xl font-display font-semibold mb-2",children:"A few more details"}),e.jsxs("p",{className:"text-muted-foreground mb-8",children:["Tell us about ",a.name]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Owner name"}),e.jsx(i,{placeholder:"e.g., Taylor Chen",value:a.ownerName,onChange:s=>t({...a,ownerName:s.target.value})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Gender"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(s=>e.jsx("button",{onClick:()=>t({...a,gender:s.value}),className:o("px-4 py-2 rounded-full text-sm font-medium transition-all",a.gender===s.value?"bg-primary text-primary-foreground":"bg-card-muted hover:bg-card-subtle"),children:s.label},s.value))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Personality"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(s=>e.jsx("button",{onClick:()=>t({...a,personality:s}),className:o("px-4 py-2 rounded-full text-sm font-medium transition-all",a.personality===s?"bg-primary text-primary-foreground":"bg-card-muted hover:bg-card-subtle"),children:s},s))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Date of Birth"}),e.jsx(i,{type:"date",placeholder:"2021-09-15",value:a.dateOfBirth,onChange:s=>t({...a,dateOfBirth:s.target.value}),max:new Date().toISOString().split("T")[0]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Optional - helps track your pet's age"})]})]}),r===4&&e.jsx("div",{className:"animate-fade-in space-y-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-semibold mb-2",children:"Personalize their profile"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Give Soycraft more context so insights feel personal."}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),e.jsx(i,{placeholder:a.name?a.name.toLowerCase().replace(/\s+/g,""):"soycraftpup",value:a.handle,onChange:s=>t({...a,handle:s.target.value}),className:"pl-8"})]}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Favourite activities"}),e.jsx(i,{placeholder:"e.g., park runs, puzzle toys",value:a.favoriteActivities,onChange:s=>t({...a,favoriteActivities:s.target.value}),className:"mb-4"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Medical history"}),e.jsx("textarea",{placeholder:"Chicken sensitivity; ACL surgery in 2022",value:a.medicalHistory,onChange:s=>t({...a,medicalHistory:s.target.value}),className:"w-full h-24 rounded-xl bg-card-subtle px-4 py-3 text-foreground placeholder:text-muted-foreground resize-none focus:outline-none focus:ring-2 focus:ring-primary/20 mb-4"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Allergies"}),e.jsx(i,{placeholder:"e.g., chicken protein, grass",value:a.allergies,onChange:s=>t({...a,allergies:s.target.value})})]})}),e.jsxs("div",{className:"mt-auto pt-8 flex gap-3",children:[r>1&&e.jsx(v,{variant:"secondary",onClick:p,className:"flex-1",children:"Previous"}),e.jsx(v,{onClick:O,disabled:!P()||h||n,className:"flex-1",children:h||n?"Adding...":r===d?"Finish":"Next"})]})]})]})}export{W as default};
