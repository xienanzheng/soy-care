import{c as o,u as O,a as q,r,j as e,t as c,s as i}from"./index-DykhQkCz.js";import{M as R,a as A,P,B as U}from"./MobileLayout-D0P8EqVx.js";import{B as I}from"./BottomNav-B9ClJoKd.js";import{S as T}from"./switch-DUxLsqSW.js";import{D as B,a as F,c as V,d as z,e as G}from"./dialog-C6CGz7Ks.js";import{L as W}from"./LegalModal-suU-uFo-.js";import{C as j}from"./chevron-right-BDWtZfPp.js";import{M as Y}from"./mail-CP880m6G.js";import{F as J}from"./file-text-BBf4xlqY.js";import{f as K}from"./format-DsNdWjgr.js";import"./index-Dsh9-iej.js";import"./index-Cqgnfz2u.js";import"./differenceInCalendarDays-qwJqrl5B.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=o("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=o("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=o("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=o("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=o("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=o("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function ge(){const p=O(),{signOut:b,user:d}=q(),[h,g]=r.useState(!1),[m,u]=r.useState(null),[v,x]=r.useState(null),[l,w]=r.useState(()=>typeof window>"u"?"light":localStorage.getItem("soycraft-theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));r.useEffect(()=>{if(typeof document>"u")return;const s=document.documentElement;l==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("soycraft-theme",l)},[l]);const k=[{icon:te,label:"Account",description:"Profile, email, and avatar",action:()=>p("/settings/account")},{icon:ee,label:"Privacy & Security",description:"Review how we handle your data",action:()=>u("privacy")},{icon:Q,label:"Help & Support",description:"Get answers or contact the team",action:()=>x("help")},{icon:J,label:"Terms of Service",description:"Understand your responsibilities",action:()=>u("terms")}],N=async()=>{await b(),c({title:"Logged out",description:"You have been signed out successfully."}),p("/")},_=async()=>{if(!d){c({title:"Not logged in",variant:"destructive"});return}g(!0);try{const{data:s,error:f}=await i.from("pets").select("*").eq("user_id",d.id);if(f)throw f;const L=await Promise.all((s||[]).map(async a=>{const[S,D,E,H]=await Promise.all([i.from("food_logs").select("*").eq("pet_id",a.id).order("logged_at",{ascending:!1}),i.from("poop_logs").select("*").eq("pet_id",a.id).order("logged_at",{ascending:!1}),i.from("supplement_logs").select("*").eq("pet_id",a.id).order("logged_at",{ascending:!1}),i.from("measurement_logs").select("*").eq("pet_id",a.id).order("logged_at",{ascending:!1})]);return{name:a.name,handle:a.handle,species:a.species,breed:a.breed,gender:a.gender,dateOfBirth:a.date_of_birth,photoUrl:a.photo_url,createdAt:a.created_at,foodLogs:(S.data||[]).map(t=>({name:t.name,amountGrams:t.amount_grams,mealType:t.meal_type,notes:t.notes,loggedAt:t.logged_at})),poopLogs:(D.data||[]).map(t=>({consistency:t.consistency,color:t.color,amount:t.amount,location:t.location,notes:t.notes,userRating:t.user_rating,loggedAt:t.logged_at})),supplementLogs:(E.data||[]).map(t=>({name:t.name,dosage:t.dosage,frequency:t.frequency,notes:t.notes,loggedAt:t.logged_at})),measurementLogs:(H.data||[]).map(t=>({weightKg:t.weight_kg,neckCm:t.neck_cm,chestCm:t.chest_cm,bodyLengthCm:t.body_length_cm,notes:t.notes,loggedAt:t.logged_at}))}})),C={exportDate:new Date().toISOString(),user:{email:d.email},pets:L},M=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),y=URL.createObjectURL(M),n=document.createElement("a");n.href=y,n.download=`soycraft-health-data-${K(new Date,"yyyy-MM-dd")}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(y),c({title:"Export complete",description:"Your health data has been downloaded."})}catch(s){c({title:"Export failed",description:s.message,variant:"destructive"})}finally{g(!1)}};return e.jsxs(R,{children:[e.jsx(A,{title:"Settings"}),e.jsxs(P,{className:"space-y-6",children:[e.jsx("div",{className:"space-y-2",children:k.map(s=>e.jsxs("button",{onClick:s.action,className:"w-full flex items-center gap-4 p-4 rounded-xl bg-card-muted transition-all hover:bg-card-subtle text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-background flex items-center justify-center",children:e.jsx(s.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),e.jsx(j,{className:"w-5 h-5 text-muted-foreground"})]},s.label))}),e.jsxs("button",{onClick:_,disabled:h,className:"w-full flex items-center gap-4 p-4 rounded-xl bg-card-muted transition-all hover:bg-card-subtle disabled:opacity-50",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-background flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 text-left font-medium",children:h?"Exporting...":"Export Health Data"}),e.jsx(j,{className:"w-5 h-5 text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-card-muted",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-background flex items-center justify-center",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Dark Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The app respects this preference across sessions."})]}),e.jsx(T,{checked:l==="dark",onCheckedChange:s=>w(s?"dark":"light"),"aria-label":"Toggle dark mode"})]}),e.jsxs("button",{onClick:N,className:"w-full flex items-center gap-4 p-4 rounded-xl bg-destructive/10 text-destructive transition-all hover:bg-destructive/20",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-destructive/10 flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 text-left font-medium",children:"Log Out"})]}),e.jsxs("div",{className:"text-center pt-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Soycraft Pet Care"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Version 1.0.0"})]})]}),e.jsx(B,{open:v==="help",onOpenChange:s=>x(s?"help":null),children:e.jsxs(F,{children:[e.jsxs(V,{children:[e.jsx(z,{children:"Help & Support"}),e.jsx(G,{children:"Reach out if you have product questions, need to report a bug, or want to suggest a feature."})]}),e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsx("p",{children:"• Review the FAQ inside the Care Hub for quick onboarding tips."}),e.jsx("p",{children:"• Email us screenshots or exported logs if you notice data inconsistencies."}),e.jsx("p",{children:"• We typically respond within one business day."})]}),e.jsx(U,{asChild:!0,children:e.jsxs("a",{href:"mailto:support@soycraft.ai",className:"inline-flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"support@soycraft.ai"]})})]})}),m&&e.jsx(W,{variant:m,open:!!m,onOpenChange:s=>{s||u(null)}}),e.jsx(I,{})]})}export{ge as default};
