import{c as m,b as h,r as x,j as e}from"./index-DykhQkCz.js";import{M as p,a as u,P as f,B as j}from"./MobileLayout-D0P8EqVx.js";import{B as y}from"./BottomNav-B9ClJoKd.js";import{u as N}from"./useCommunityFeed-BnvToe_v.js";import{P as g}from"./PetAvatar-Bi96YrWD.js";import{f as v}from"./format-DsNdWjgr.js";import"./differenceInCalendarDays-qwJqrl5B.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=m("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=m("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);function R(){const{posts:a,isLoading:d,refetch:l}=N(),{pets:r}=h(),i=x.useMemo(()=>a.map(t=>({...t,pet:r.find(s=>s.id===t.petId)})),[a,r]);return e.jsxs(p,{children:[e.jsx(u,{title:"Community",rightAction:e.jsx("button",{onClick:()=>l(),className:"p-2 -mr-2 text-primary",children:e.jsx(b,{className:"w-5 h-5"})})}),e.jsx(f,{className:"pb-24",children:d?e.jsx("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:"Loading feed…"}):i.length===0?e.jsxs("div",{className:"rounded-2xl bg-card-muted p-6 text-center",children:[e.jsx("p",{className:"font-medium mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Share a food log or poop entry with a note to let other pet parents know how it’s going."}),e.jsx(j,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Refresh"})]}):e.jsx("div",{className:"space-y-4",children:i.map(t=>{var s,c,n,o;return e.jsxs("article",{className:"p-4 rounded-2xl bg-card-muted space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{name:((s=t.pet)==null?void 0:s.name)??"Pet",photoUrl:(c=t.pet)==null?void 0:c.photoUrl,size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:((n=t.pet)==null?void 0:n.name)||"Pet pal"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.ownerName," • ",v(new Date(t.createdAt),"MMM d, h:mm a")]})]})]}),e.jsx("p",{className:"text-sm",children:t.content}),t.photoUrl&&e.jsx("img",{src:t.photoUrl,alt:"Community",className:"w-full h-48 object-cover rounded-xl"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(w,{className:"w-3.5 h-3.5"}),t.likes??0," cheers"]}),((o=t.pet)==null?void 0:o.favoriteActivities)&&e.jsxs("span",{children:["Fav: ",t.pet.favoriteActivities]})]})]},t.id)})})}),e.jsx(y,{})]})}export{R as default};
