import{a as g,r as p,s as n}from"./index-DykhQkCz.js";function U(){const{user:a}=g(),[f,l]=p.useState(!1),[d,u]=p.useState(0);return{uploadPhoto:async(e,o,r)=>{if(!a)return null;l(!0),u(0);try{const t=e.name.split(".").pop(),s=`${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`,c=r?`${a.id}/${r}/${s}`:`${a.id}/${s}`,{error:i}=await n.storage.from(o).upload(c,e,{cacheControl:"3600",upsert:!1});if(i)throw i;const{data:{publicUrl:h}}=n.storage.from(o).getPublicUrl(c);return u(100),h}catch(t){return console.error("Upload error:",t),null}finally{l(!1)}},deletePhoto:async(e,o)=>{try{const r=e.split(`${o}/`);if(r.length<2)return!1;const t=r[1],{error:s}=await n.storage.from(o).remove([t]);return!s}catch(r){return console.error("Delete error:",r),!1}},isUploading:f,uploadProgress:d}}export{U as u};
